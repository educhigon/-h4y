<% unless request.env['PATH_INFO'].match(%r{^/posts/\d+$}) %>
  <div class="post-content">
    <%= link_to post_path(post), class: "title" do %>
      <%= post.title %>
    <% end %>
    <div class="tags flex-wrap align-content-start">
      <% post.tags.each do |tag| %>
        <%= link_to "!#{tag.name}", searches_path(query: tag.name), class: "#{'active' if params[:type] == 'tags'}" %>
      <% end %>
    </div>
    <%= link_to post_path(post), class: "description" do %>
      <% if request.env['PATH_INFO'] == "/posts" %>
        <%= truncate(post.content, length: 100) %>
      <% else %>
        <%= post.content %>...
      <% end %>
    <% end %>
  </div>

<% else %>
  <div class="post-content">
    <div class="title">
      <%= post.title %>
    </div>
    <div class="tags flex-row">
      <% post.tags.each do |tag| %>
        <%= link_to "!#{tag.name}", tag_path(tag), class: 'tag-link' %>
      <% end %>
    </div>
    <div class="description">
      <% if request.env['PATH_INFO'] == "/posts" %>
        <%= truncate(post.content, length: 100) %>...
      <% else %>
        <%= post.content %>
      <% end %>
    </div>
  </div>
<% end %>
